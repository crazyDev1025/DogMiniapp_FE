import React, { useState, useRef, useEffect } from 'react';
import { useNavigate } from "react-router-dom";

function Header({ valuable }) {
    const [flag, setFlag] = useState(false);
    const hamburgerRef = useRef(null);
    const buttonRef = useRef(null);

    const navigate = useNavigate();
  
    const toggleTools = () => {
      setFlag((prevFlag) => !prevFlag); // Toggle the flag state
    };
  
    // Close the menu when clicking outside of the hamburger or button div
    useEffect(() => {
      const handleClickOutside = (event) => {
        if (
          hamburgerRef.current &&
          !hamburgerRef.current.contains(event.target) &&
          buttonRef.current &&
          !buttonRef.current.contains(event.target)
        ) {
          setFlag(false); // Hide the div when clicking outside
        }
      };
  
      // Add event listener when component is mounted
      document.addEventListener('mousedown', handleClickOutside);
  
      // Cleanup the event listener when component is unmounted
      return () => {
        document.removeEventListener('mousedown', handleClickOutside);
      };
    }, []);

  return (
    <div className="mb-[20px]">
      <div className="w-full flex justify-between">
        {
          valuable ? (
            <div className="text-[17px] leading-[22px] text-white cursor-pointer" onClick={() => navigate(`/${valuable}`)}>Back</div>
          ) : (
            <div className="text-[17px] leading-[22px] text-white cursor-pointer">Close</div>
          )
        }
        <div>
          <div className="flex">
            <div className="text-[18px] leading-[22px] font-semibold text-white">Mini Dog</div>
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M8.46096 1.35466C9.26071 0.390895 10.7394 0.390896 11.5392 1.35466L12.2274 2.18407C12.6491 2.69218 13.2943 2.95944 13.9517 2.8983L15.0249 2.7985C16.2719 2.68252 17.3175 3.72811 17.2015 4.97511L17.1017 6.04827C17.0405 6.70569 17.3078 7.35093 17.8159 7.77257L18.6453 8.46084C19.6091 9.26059 19.6091 10.7393 18.6453 11.539L17.8159 12.2273C17.3078 12.6489 17.0405 13.2942 17.1017 13.9516L17.2015 15.0248C17.3175 16.2718 16.2719 17.3173 15.0249 17.2014L13.9517 17.1016C13.2943 17.0404 12.6491 17.3077 12.2274 17.8158L11.5392 18.6452C10.7394 19.609 9.26071 19.609 8.46096 18.6452L7.77269 17.8158C7.35106 17.3077 6.70582 17.0404 6.04839 17.1016L4.97523 17.2014C3.72824 17.3173 2.68265 16.2718 2.79862 15.0248L2.89842 13.9516C2.95956 13.2942 2.6923 12.6489 2.1842 12.2273L1.35478 11.539C0.391017 10.7393 0.391018 9.26059 1.35478 8.46084L2.1842 7.77257C2.6923 7.35093 2.95956 6.70569 2.89842 6.04827L2.79862 4.97511C2.68265 3.72811 3.72823 2.68252 4.97523 2.7985L6.04839 2.8983C6.70582 2.95944 7.35105 2.69218 7.77269 2.18407L8.46096 1.35466Z" fill="#0A84FF"/>
                <path d="M6.75 10.25L9.12158 12.25L13.25 7.75" stroke="white" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
            </svg>
          </div>
          <div className="text-[13px] leading-[18px] text-[#8E8E93]">mini app</div>
        </div>
        <div ref={buttonRef} className="cursor-pointer" onClick={toggleTools}>
            <svg width="23" height="22" viewBox="0 0 23 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M11.2583 21.8145C10.0741 21.8145 8.94238 21.6291 7.86328 21.2583C6.78971 20.8931 5.80192 20.3784 4.8999 19.7144C3.99788 19.0503 3.21484 18.2673 2.55078 17.3652C1.88672 16.4632 1.3693 15.4727 0.998535 14.3936C0.633301 13.3145 0.450684 12.1855 0.450684 11.0068C0.450684 9.82259 0.633301 8.69368 0.998535 7.62012C1.36377 6.54102 1.87842 5.55046 2.54248 4.64844C3.21208 3.74642 3.99512 2.96338 4.8916 2.29932C5.79362 1.62972 6.78141 1.1123 7.85498 0.74707C8.93408 0.376302 10.0658 0.190918 11.25 0.190918C12.4342 0.190918 13.5659 0.376302 14.645 0.74707C15.7241 1.1123 16.7147 1.62972 17.6167 2.29932C18.5187 2.96338 19.3018 3.74642 19.9658 4.64844C20.6354 5.55046 21.1528 6.54102 21.5181 7.62012C21.8888 8.69368 22.0742 9.82259 22.0742 11.0068C22.0742 12.1855 21.8888 13.3145 21.5181 14.3936C21.1528 15.4727 20.6354 16.4632 19.9658 17.3652C19.3018 18.2673 18.5187 19.0503 17.6167 19.7144C16.7147 20.3784 15.7241 20.8931 14.645 21.2583C13.5715 21.6291 12.4425 21.8145 11.2583 21.8145ZM11.2583 20.2705C12.2876 20.2705 13.2643 20.1128 14.1885 19.7974C15.1182 19.4875 15.9676 19.0503 16.7368 18.4858C17.5116 17.9214 18.1812 17.2546 18.7456 16.4854C19.3101 15.7106 19.7472 14.8612 20.0571 13.937C20.367 13.0073 20.522 12.0306 20.522 11.0068C20.522 9.97754 20.367 9.00081 20.0571 8.07666C19.7472 7.14697 19.3073 6.29753 18.7373 5.52832C18.1729 4.75358 17.5033 4.08398 16.7285 3.51953C15.9593 2.95508 15.1099 2.5179 14.1802 2.20801C13.256 1.89811 12.2793 1.74316 11.25 1.74316C10.2262 1.74316 9.24951 1.89811 8.31982 2.20801C7.39567 2.5179 6.54899 2.95508 5.77979 3.51953C5.01058 4.08398 4.34375 4.75358 3.7793 5.52832C3.21484 6.29753 2.77767 7.14697 2.46777 8.07666C2.15788 9.00081 2.00293 9.97754 2.00293 11.0068C2.00293 12.0306 2.15788 13.0073 2.46777 13.937C2.77767 14.8612 3.21484 15.7106 3.7793 16.4854C4.34928 17.2546 5.01888 17.9214 5.78809 18.4858C6.55729 19.0503 7.40397 19.4875 8.32812 19.7974C9.25781 20.1128 10.2345 20.2705 11.2583 20.2705ZM6.29443 12.4761C5.88493 12.4761 5.53353 12.3322 5.24023 12.0444C4.95247 11.7567 4.80859 11.408 4.80859 10.9985C4.80859 10.589 4.95247 10.2404 5.24023 9.95264C5.53353 9.65934 5.88493 9.5127 6.29443 9.5127C6.6984 9.5127 7.04427 9.65934 7.33203 9.95264C7.62533 10.2404 7.77197 10.589 7.77197 10.9985C7.77197 11.408 7.62533 11.7567 7.33203 12.0444C7.04427 12.3322 6.6984 12.4761 6.29443 12.4761ZM11.25 12.4761C10.8405 12.4761 10.4919 12.3322 10.2041 12.0444C9.91634 11.7567 9.77246 11.408 9.77246 10.9985C9.77246 10.589 9.91634 10.2404 10.2041 9.95264C10.4919 9.65934 10.8405 9.5127 11.25 9.5127C11.6595 9.5127 12.0081 9.65934 12.2959 9.95264C12.5892 10.2404 12.7358 10.589 12.7358 10.9985C12.7358 11.408 12.5892 11.7567 12.2959 12.0444C12.0081 12.3322 11.6595 12.4761 11.25 12.4761ZM16.2139 12.4761C15.8044 12.4761 15.453 12.3322 15.1597 12.0444C14.8719 11.7567 14.728 11.408 14.728 10.9985C14.728 10.589 14.8719 10.2404 15.1597 9.95264C15.453 9.65934 15.8044 9.5127 16.2139 9.5127C16.6234 9.5127 16.972 9.65934 17.2598 9.95264C17.5475 10.2404 17.6914 10.589 17.6914 10.9985C17.6914 11.408 17.5475 11.7567 17.2598 12.0444C16.972 12.3322 16.6234 12.4761 16.2139 12.4761Z" fill="white"/>
            </svg>
        </div>
      </div>

      {/* This div will be toggled when clicking the button and hidden when clicking outside */}
      {flag && (
        <div
          id="hamburger"
          ref={hamburgerRef}
          className="w-[228px] h-[133px] rounded-[12px] bg-[#222222] flex flex-col divide-y absolute right-[16px] top-[65px]"
        >
          {/* Your inner content for the hamburger div */}
          <div className="flex justify-between px-[16px] h-[33.3%] pt-[10px]">
            <div className="text-[17px] leading-[22px] font-normal text-white font-Poppins">Share</div>
                <svg width="16" height="19" viewBox="0 0 16 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3.23535 18.7642C2.36654 18.7642 1.71354 18.5483 1.27637 18.1167C0.844727 17.6906 0.628906 17.0487 0.628906 16.1909V7.90674C0.628906 7.04899 0.844727 6.40706 1.27637 5.98096C1.71354 5.54932 2.36654 5.3335 3.23535 5.3335H5.73389V6.66992H3.25195C2.83691 6.66992 2.51872 6.7806 2.29736 7.00195C2.07601 7.22331 1.96533 7.5498 1.96533 7.98145V16.1162C1.96533 16.5479 2.07601 16.8743 2.29736 17.0957C2.51872 17.3171 2.83691 17.4277 3.25195 17.4277H12.7314C13.141 17.4277 13.4591 17.3171 13.686 17.0957C13.9129 16.8743 14.0264 16.5479 14.0264 16.1162V7.98145C14.0264 7.5498 13.9129 7.22331 13.686 7.00195C13.4591 6.7806 13.141 6.66992 12.7314 6.66992H10.2578V5.3335H12.7563C13.6252 5.3335 14.2754 5.54932 14.707 5.98096C15.1442 6.4126 15.3628 7.05452 15.3628 7.90674V16.1909C15.3628 17.0431 15.1442 17.6851 14.707 18.1167C14.2754 18.5483 13.6252 18.7642 12.7563 18.7642H3.23535ZM7.9917 12.2646C7.81462 12.2646 7.65967 12.201 7.52686 12.0737C7.39958 11.9465 7.33594 11.7943 7.33594 11.6172V3.09229L7.38574 1.84717L6.82129 2.43652L5.56787 3.78125C5.45166 3.91406 5.29948 3.98047 5.11133 3.98047C4.93424 3.98047 4.79036 3.92513 4.67969 3.81445C4.56901 3.70378 4.51367 3.56266 4.51367 3.39111C4.51367 3.23617 4.57731 3.09229 4.70459 2.95947L7.51025 0.253418C7.5988 0.17041 7.67904 0.112305 7.75098 0.0791016C7.82845 0.0458984 7.90869 0.0292969 7.9917 0.0292969C8.08024 0.0292969 8.16048 0.0458984 8.23242 0.0791016C8.3099 0.112305 8.39014 0.17041 8.47314 0.253418L11.2788 2.95947C11.4116 3.09229 11.478 3.23617 11.478 3.39111C11.478 3.56266 11.4199 3.70378 11.3037 3.81445C11.1875 3.92513 11.0436 3.98047 10.8721 3.98047C10.6895 3.98047 10.54 3.91406 10.4238 3.78125L9.16211 2.43652L8.60596 1.84717L8.65576 3.09229V11.6172C8.65576 11.7943 8.58936 11.9465 8.45654 12.0737C8.32926 12.201 8.17432 12.2646 7.9917 12.2646Z" fill="white"/>
                </svg>
          </div>
          <div className="flex justify-between px-[16px] h-[33.3%] pt-[10px]">
            <div className="text-[17px] leading-[22px] font-normal text-white font-Poppins">Reload page</div>
                <svg width="16" height="18" viewBox="0 0 16 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0.662109 10.6045C0.662109 9.5918 0.85026 8.64274 1.22656 7.75732C1.6084 6.86637 2.13411 6.0861 2.80371 5.4165C3.47331 4.74691 4.25081 4.22396 5.13623 3.84766C6.02718 3.46582 6.98177 3.2749 8 3.2749C8.25456 3.2749 8.50081 3.28874 8.73877 3.31641C8.98226 3.33854 9.21191 3.37174 9.42773 3.41602L7.21973 1.23291C7.15885 1.1665 7.11182 1.0918 7.07861 1.00879C7.05094 0.925781 7.03711 0.842773 7.03711 0.759766C7.03711 0.566081 7.09798 0.405599 7.21973 0.27832C7.34701 0.145508 7.50472 0.0791016 7.69287 0.0791016C7.89209 0.0791016 8.05257 0.145508 8.17432 0.27832L11.5942 3.74805C11.7326 3.89193 11.8018 4.05794 11.8018 4.24609C11.8018 4.34017 11.7852 4.42871 11.752 4.51172C11.7188 4.59473 11.6662 4.6722 11.5942 4.74414L8.17432 8.18066C8.05811 8.30794 7.89762 8.37158 7.69287 8.37158C7.51025 8.37158 7.35531 8.30794 7.22803 8.18066C7.10075 8.05339 7.03711 7.89567 7.03711 7.70752C7.03711 7.61898 7.05371 7.53597 7.08691 7.4585C7.12012 7.37549 7.16715 7.30078 7.22803 7.23438L9.70996 4.77734C9.46647 4.72201 9.19808 4.6805 8.90479 4.65283C8.61702 4.62516 8.31543 4.61133 8 4.61133C7.16439 4.61133 6.38411 4.76628 5.65918 5.07617C4.93424 5.38607 4.29785 5.81494 3.75 6.36279C3.20215 6.91064 2.77327 7.54704 2.46338 8.27197C2.15348 8.99691 1.99854 9.77441 1.99854 10.6045C1.99854 11.4401 2.15348 12.2231 2.46338 12.9536C2.77327 13.6785 3.20215 14.3177 3.75 14.8711C4.29785 15.4189 4.93424 15.8451 5.65918 16.1494C6.38411 16.4593 7.16439 16.6143 8 16.6143C8.83008 16.6143 9.60758 16.4593 10.3325 16.1494C11.0575 15.8451 11.6938 15.4189 12.2417 14.8711C12.7896 14.3177 13.2184 13.6785 13.5283 12.9536C13.8382 12.2231 13.9932 11.4401 13.9932 10.6045C13.9932 10.4053 14.0513 10.242 14.1675 10.1147C14.2837 9.98193 14.4414 9.91553 14.6406 9.91553C14.8454 9.91553 15.0114 9.98193 15.1387 10.1147C15.266 10.242 15.3296 10.4053 15.3296 10.6045C15.3296 11.6283 15.1414 12.5856 14.7651 13.4766C14.3888 14.362 13.8631 15.1423 13.188 15.8174C12.5184 16.487 11.7381 17.0099 10.8472 17.3862C9.96175 17.7625 9.0127 17.9507 8 17.9507C6.98177 17.9507 6.02718 17.7625 5.13623 17.3862C4.25081 17.0099 3.47331 16.487 2.80371 15.8174C2.13411 15.1423 1.6084 14.362 1.22656 13.4766C0.85026 12.5856 0.662109 11.6283 0.662109 10.6045Z" fill="white"/>
                </svg>
          </div>
          <div className="flex justify-between px-[16px] h-[33.3%] pt-[10px]">
            <div className="text-[17px] leading-[22px] font-normal text-white font-Poppins">Terms of Use</div>
                <svg width="15" height="18" viewBox="0 0 15 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.83398 17.6147C7.76758 17.6147 7.68457 17.6009 7.58496 17.5732C7.48535 17.5456 7.38298 17.5041 7.27783 17.4487C6.09912 16.7847 5.10303 16.1953 4.28955 15.6807C3.48161 15.166 2.83138 14.668 2.33887 14.1865C1.84635 13.7051 1.48942 13.1849 1.26807 12.626C1.04671 12.0671 0.936035 11.4085 0.936035 10.6504V4.30029C0.936035 3.86312 1.02734 3.55046 1.20996 3.3623C1.39811 3.16862 1.6665 2.99984 2.01514 2.85596C2.20882 2.77295 2.47721 2.66504 2.82031 2.53223C3.16341 2.39941 3.54248 2.25553 3.95752 2.10059C4.37256 1.94564 4.78483 1.79346 5.19434 1.64404C5.60938 1.4891 5.98844 1.35352 6.33154 1.2373C6.67464 1.11556 6.9458 1.02702 7.14502 0.97168C7.2557 0.94401 7.36914 0.916341 7.48535 0.888672C7.60156 0.861003 7.71777 0.847168 7.83398 0.847168C7.9502 0.847168 8.06641 0.861003 8.18262 0.888672C8.30436 0.910807 8.42057 0.938477 8.53125 0.97168C8.72493 1.03809 8.99333 1.13216 9.33643 1.25391C9.67952 1.37565 10.0586 1.51123 10.4736 1.66064C10.8887 1.81006 11.3009 1.96224 11.7104 2.11719C12.1255 2.2666 12.5046 2.40771 12.8477 2.54053C13.1908 2.66781 13.4591 2.77295 13.6528 2.85596C14.007 3.00537 14.2754 3.17415 14.458 3.3623C14.6406 3.55046 14.7319 3.86312 14.7319 4.30029V10.6504C14.7319 11.4085 14.6213 12.0698 14.3999 12.6343C14.1841 13.1932 13.8299 13.7134 13.3374 14.1948C12.8449 14.6763 12.1919 15.1715 11.3784 15.6807C10.5705 16.1953 9.57438 16.7847 8.39014 17.4487C8.28499 17.5041 8.18262 17.5456 8.08301 17.5732C7.9834 17.6009 7.90039 17.6147 7.83398 17.6147ZM7.83398 16.1123C7.90039 16.1123 7.97233 16.0957 8.0498 16.0625C8.12728 16.0348 8.22689 15.985 8.34863 15.9131C9.30599 15.332 10.1084 14.8312 10.7559 14.4106C11.4089 13.9901 11.929 13.5916 12.3164 13.2153C12.7093 12.839 12.9888 12.4268 13.1548 11.9785C13.3263 11.5303 13.4121 10.9852 13.4121 10.3433V4.55762C13.4121 4.41927 13.3927 4.31413 13.354 4.24219C13.3208 4.17025 13.2489 4.11491 13.1382 4.07617C12.8781 3.98763 12.5793 3.88525 12.2417 3.76904C11.9097 3.6473 11.5583 3.52002 11.1875 3.38721C10.8223 3.25439 10.4543 3.12158 10.0835 2.98877C9.71826 2.85042 9.36963 2.72038 9.0376 2.59863C8.70557 2.47135 8.41504 2.35791 8.16602 2.2583C8.09961 2.23063 8.03874 2.21126 7.9834 2.2002C7.92806 2.18913 7.87826 2.18359 7.83398 2.18359C7.78971 2.18359 7.73991 2.18913 7.68457 2.2002C7.62923 2.21126 7.56836 2.23063 7.50195 2.2583C7.25293 2.35791 6.9624 2.46859 6.63037 2.59033C6.29834 2.71208 5.94694 2.83936 5.57617 2.97217C5.2054 3.09945 4.83464 3.22949 4.46387 3.3623C4.0931 3.49512 3.7417 3.6224 3.40967 3.74414C3.07764 3.86589 2.78711 3.97656 2.53809 4.07617C2.42188 4.12044 2.3444 4.17855 2.30566 4.25049C2.27246 4.31689 2.25586 4.41927 2.25586 4.55762V10.3433C2.25586 10.9852 2.34163 11.5303 2.51318 11.9785C2.68473 12.4268 2.96419 12.8418 3.35156 13.2236C3.73893 13.5999 4.25635 13.9984 4.90381 14.4189C5.5568 14.834 6.36198 15.332 7.31934 15.9131C7.44108 15.985 7.54069 16.0348 7.61816 16.0625C7.69564 16.0957 7.76758 16.1123 7.83398 16.1123ZM7.83398 10.3267C7.40788 10.3267 7.18929 10.1081 7.17822 9.6709L7.07031 5.27979C7.06478 5.0695 7.13118 4.89518 7.26953 4.75684C7.41341 4.61849 7.5988 4.54932 7.82568 4.54932C8.04704 4.54932 8.22965 4.62126 8.37354 4.76514C8.52295 4.90348 8.59489 5.0778 8.58936 5.28809L8.46484 9.6709C8.45931 10.1081 8.24902 10.3267 7.83398 10.3267ZM7.83398 13.0244C7.59049 13.0244 7.38021 12.9414 7.20312 12.7754C7.02604 12.6038 6.9375 12.3991 6.9375 12.1611C6.9375 11.9232 7.02604 11.7212 7.20312 11.5552C7.38021 11.3836 7.59049 11.2979 7.83398 11.2979C8.07747 11.2979 8.28776 11.3809 8.46484 11.5469C8.64193 11.7129 8.73047 11.9176 8.73047 12.1611C8.73047 12.4046 8.63916 12.6094 8.45654 12.7754C8.27946 12.9414 8.07194 13.0244 7.83398 13.0244Z" fill="white"/>
                </svg>
          </div>
        </div>
      )}
    </div>
  );
}

export default Header;
